#!/usr/bin/env bash
# .xprofile

# Disable touchpad while typing
if [ -x "$(command -v syndaemon)" ] ; then {
        syndaemon -d -i 1 -m 100 -K
} fi

# Multiple monitor configuration
# REFACTOR: this should be done by checking if the laptop is at home by 
# REFACTOR: seeing if the display information matches
NUM_MONITORS=$("xrandr --listmonitors | sed 's/[^0-9]//g' | head -n 1")
if (( $NUM_MONITORS = 2 )) ; then { 
        source ~/bin/monitors.bash
} fi

# Pywal colorscheme and wallpaper selection
if [ -x "$(command -v wal)" ] ; then {
        
        # Randomly select a wallpaper and generate a colorscheme randomly
        # without setting the wallpaper
        wal --recursive -nq -i ~/Pictures/wallpapers/4k/

        # Apply pywal colorscheme to Firefox
        if [ -x "$(command -v pywalfox)" ] ; then {
                pywalfox update
        } fi

        # Apply pywal colorscheme to patched zathura
        if [ -x "$(command -v zathura-pywal)" ] ; then {
                zathura-pywal -a 0.9
        } fi

        # Apply pywal colorscheme to KiCAD
        if [ -f "~/Projects/kicad/kicad-scripts/kiwal.py" ] ; then {
                python ~/Projects/kicad/kicad-scripts/kiwal.py
        } fi

} fi
